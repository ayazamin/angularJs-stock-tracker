var app=angular.module("app",["ngResource"]);app.factory("googleFinance",["$resource",function(t){return t("https://finance.google.com/finance/info",{client:"ig",callback:"JSON_CALLBACK"},{get:{method:"JSONP",params:{q:"@q"},isArray:!0}})}]),app.controller("DemoController",["$scope","googleFinance","$timeout",function(t,e,i){var a="",n=[];t.stockVal="",t.stockType="",t.selectedItem={},t.itemExist=!1,t.message="",t.startTime=function(){var t=new Date;return t.getHours()+":"+t.getMinutes()},t.addStock=function(){if(!_.isEmpty(t.stockVal)&&!_.isEmpty(t.stockType)){for(var e=0;e<t.items.length;e++)t.items[e].name==t.stockVal&&(t.itemExist=!0);t.itemExist?t.message="Alreay exist item":(t.items.push({id:"",name:t.stockVal,point:"",type:t.stockType,time:""}),n[t.stockVal]=[]),t.stockVal="",t.stockType=""}},t.checkedData=function(){a="",angular.forEach(t.selectedItem,function(e,i){if(1==e){for(var s=0;s<t.items.length;s++)if(t.items[s].name==i){index=s;break}t.items[index].time=t.startTime(),_.isEmpty(a)||(a+=","),a+=t.items[index].type+":"+i}else n[i]=[]}),t.getFinaceData()},t.getInitialData=function(){t.items=[{id:"",name:"RELIANCE",point:"",type:"NSE",time:""},{id:"",name:"HDFC",point:"",type:"NSE",time:""}];for(var e=0;e<t.items.length;e++)n[t.items[e].name]=[]},t.getFinaceData=function(){_.isEmpty(a)||(e.get({q:a},function(e){for(var i=0;i<e.length;i++){for(var a=e[i].l_fix,s=e[i].t,o=0;o<t.items.length;o++)t.items[o].name==s&&(t.items[o].point=a);n[e[i].t].push(a),t.initialiseChart(e[i].t)}}),i(function(){t.getFinaceData()},15e3))},t.initialiseChart=function(t){var e=0,i=n[t],a=Object.keys(i).map(function(t){return e+=15,{x:e,y:Number(i[t])}});new CanvasJS.Chart(t,{title:{text:t},axisX:{interval:15},data:[{type:"line",dataPoints:a}]}).render()},t.getInitialData()}]);